#!/bin/sh
# VERSION = 99.99.99
# Madou Omni Update Test Script
# è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è„šæœ¬ï¼Œä¸ä¼šä¿®æ”¹ä»»ä½•ç³»ç»Ÿæ–‡ä»¶ã€‚

echo "=================================================="
echo "ğŸ§ª [æµ‹è¯•æ¨¡å¼] åœ¨çº¿æ›´æ–°é€»è¾‘éªŒè¯ (v99.99.99)"
echo "=================================================="
echo ""
echo "âœ… [1/4] æˆæƒéªŒè¯æˆåŠŸï¼"
echo "   -> æ‚¨çš„è®¾å¤‡ Token æœ‰æ•ˆï¼Œä¸” kkks.h æ ¡éªŒé€šè¿‡ã€‚"
echo ""
echo "âœ… [2/4] ç½‘ç»œè¿æ¥æ­£å¸¸ï¼"
echo "   -> æ‚¨çš„æœåŠ¡å™¨æˆåŠŸè®¿é—®åˆ°äº† GitHub å¹¶ä¸‹è½½äº†æ­¤è„šæœ¬ã€‚"
echo ""
echo "âœ… [3/4] è„šæœ¬æ‰§è¡Œæƒé™æ­£å¸¸ï¼"
echo "   -> ç³»ç»ŸæˆåŠŸè°ƒç”¨äº† shell ç¯å¢ƒè¿è¡Œæ­¤è„šæœ¬ã€‚"
echo ""
echo "â³ [4/4] æ­£åœ¨æ¨¡æ‹Ÿæ–‡ä»¶å†™å…¥ (å®é™…ä¸Šä»€ä¹ˆéƒ½æ²¡åš)..."
sleep 2

# åœ¨æ•°æ®ç›®å½•ç”Ÿæˆä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ä½œä¸ºè¯æ˜
echo "Update test passed at $(date)" >> /data/update_test_success.log
echo "ğŸ“„ å·²åœ¨ /data/update_test_success.log å†™å…¥æµ‹è¯•è®°å½•ã€‚"

echo ""
echo "=================================================="
echo "ğŸ‰ æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼ç³»ç»ŸåŠŸèƒ½å®Œå¥½ã€‚"
echo "ğŸ”„ ä¸ºäº†å®Œæˆæµç¨‹é—­ç¯ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨é‡å¯..."
echo "=================================================="

# é€€å‡ºç  0 è¡¨ç¤ºæˆåŠŸï¼Œè¿™ä¼šè§¦å‘ api.js é‡Œçš„ process.exit(0) å¯¼è‡´ Docker é‡å¯
exit 0
